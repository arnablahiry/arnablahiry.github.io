

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GalCubeCraft &mdash;  0.1.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
    <link rel="shortcut icon" href="_static/favicon.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=92734c54"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Core Functionality" href="core_functionality.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="#" class="icon icon-home">
            
              <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="core_functionality.html">Core Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualisation.html">Visualisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utilities</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#"></a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">GalCubeCraft</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="galcubecraft">
<h1>GalCubeCraft<a class="headerlink" href="#galcubecraft" title="Link to this heading"></a></h1>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="core_functionality.html">Core Functionality</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core_functionality.html#design-notes">Design notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_functionality.html#GalCubeCraft.core.GalCubeCraft"><code class="docutils literal notranslate"><span class="pre">GalCubeCraft</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="visualisation.html">Visualisation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="visualisation.html#GalCubeCraft.visualise.visualise"><code class="docutils literal notranslate"><span class="pre">visualise()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="utilities.html#GalCubeCraft.utils.add_beam"><code class="docutils literal notranslate"><span class="pre">add_beam()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html#GalCubeCraft.utils.apply_and_convolve_noise"><code class="docutils literal notranslate"><span class="pre">apply_and_convolve_noise()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html#GalCubeCraft.utils.apply_noise"><code class="docutils literal notranslate"><span class="pre">apply_noise()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html#GalCubeCraft.utils.convolve_beam"><code class="docutils literal notranslate"><span class="pre">convolve_beam()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html#GalCubeCraft.utils.create_circular_aperture_mask"><code class="docutils literal notranslate"><span class="pre">create_circular_aperture_mask()</span></code></a></li>
</ul>
</li>
</ul>
</div>
<section id="project-overview">
<h2>Project overview<a class="headerlink" href="#project-overview" title="Link to this heading"></a></h2>
<p>This documentation uses the repository <code class="docutils literal notranslate"><span class="pre">README.md</span></code> as the main project
home page. The README is included below so the docs site and README stay
in sync.</p>
<p align="center">
    <img src="https://raw.githubusercontent.com/arnablahiry/GalCubeCraft/main/assets/cubecraft.png"
         alt="GalCubeCraft banner"
         width="100%" />
</p>
<p align="center">
  <a href="https://github.com/arnablahiry/GalCubeCraft/actions/workflows/ci.yml"><img src="https://github.com/arnablahiry/GalCubeCraft/actions/workflows/ci.yml/badge.svg" alt="CI status"></a>&nbsp;&nbsp;
  <a href="https://pypi.org/project/GalCubeCraft"><img src="https://img.shields.io/pypi/v/GalCubeCraft.svg?cacheSeconds=3600" alt="PyPI version"></a>&nbsp;&nbsp;
  <a href="./LICENSE"><img src="https://img.shields.io/badge/license-MIT-brightgreen.svg" alt="License"></a>&nbsp;&nbsp;
  <a href="https://doi.org/10.5281/zenodo.17840423"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.17840423.svg" alt="DOI"></a>
</p>
</section>
<section id="high-fidelity-simulator-for-synthetic-ifu-integral-field-unit-spectral-cubes">
<h2>High-fidelity simulator for synthetic IFU (Integral Field Unit) spectral cubes.<a class="headerlink" href="#high-fidelity-simulator-for-synthetic-ifu-integral-field-unit-spectral-cubes" title="Link to this heading"></a></h2>
<p>GalCubeCraft provides a compact, well-documented pipeline to build 3D spectral cubes
that mimic observations of disk galaxies. It combines simple analytic galaxy models (Sérsic
light profiles + exponential vertical structure), simple rotation-curve kinematics,
viewing-angle projections and instrument effects (beam convolution, channel binning)
to produce a physically motivated basis and test data for algorithm development, denoising, and visualization.</p>
<p>This README explains the science and mathematics behind the generator, how to install the package, and several practical examples for quick experimentation.</p>
</section>
<section id="table-of-contents">
<h2>Table of contents<a class="headerlink" href="#table-of-contents" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>What GalCubeCraft does</p></li>
<li><p>Scientific background &amp; equations</p></li>
<li><p>Installation (PyPI + source)</p></li>
<li><p>Quick start examples</p></li>
<li><p>API reference (minimal)</p></li>
<li><p>Reproducibility, limitations, and troubleshooting</p></li>
<li><p>Credits &amp; citation</p></li>
</ul>
</section>
<section id="what-galcubecraft-does">
<h2>What GalCubeCraft does<a class="headerlink" href="#what-galcubecraft-does" title="Link to this heading"></a></h2>
<p>GalCubeCraft synthesizes spectral datacubes with dimensions (n_velocity, ny, nx).
Each cube contains one or more galaxy components. For each galaxy component the
generator:</p>
<ul class="simple">
<li><p>Builds a 3D flux density field using a Sérsic profile in the disk plane combined
with an exponential vertical profile.</p></li>
<li><p>Computes an analytic circular velocity field from a compact rotation-curve model
and assigns tangential velocities to voxels.</p></li>
<li><p>Rotates the 3D flux and velocity fields to a chosen viewing geometry.</p></li>
<li><p>Projects emission into line-of-sight velocity bins to produce a spectral cube.</p></li>
<li><p>Optionally convolves each 2D channel with a telescope beam and saves cubes to
<code class="docutils literal notranslate"><span class="pre">data/raw_data/&lt;nz&gt;x&lt;ny&gt;x&lt;nx&gt;/cube_*.npy</span></code>.</p></li>
</ul>
<p>The package is intentionally clear and inspectable (readable loops, compact
functions), making it suitable for method development and teaching.</p>
</section>
<section id="scientific-background-equations">
<h2>Scientific background &amp; equations<a class="headerlink" href="#scientific-background-equations" title="Link to this heading"></a></h2>
<p>This section summarises the main mathematical building blocks implemented in
the code: the Sérsic flux distribution, vertical exponential profile, and the
analytical rotation curve used to assign tangential velocities.</p>
<section id="sersic-radial-profile-disk-plane">
<h3>Sérsic radial profile (disk plane)<a class="headerlink" href="#sersic-radial-profile-disk-plane" title="Link to this heading"></a></h3>
<p>The radial surface brightness (Sérsic) profile is given by</p>
<div class="math notranslate nohighlight">
\[S_r(r) = S_e \exp\left[-b_n\left(\left(\frac{r}{R_e}\right)^{1/n} - 1\right)\right]\]</div>
<p>where</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(S_e\)</span> is the flux density at the effective radius <span class="math notranslate nohighlight">\(R_e\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\(n\)</span> is the Sérsic index that controls the concentration,</p></li>
<li><p><span class="math notranslate nohighlight">\(b_n\)</span> is a constant that depends on <span class="math notranslate nohighlight">\(n\)</span> (approximated by a series expansion).</p></li>
</ul>
<p>The package uses the standard series expansion for <span class="math notranslate nohighlight">\(b_n\)</span>:</p>
<div class="math notranslate nohighlight">
\[b_n(n) \approx 2n - \tfrac{1}{3} + \frac{4}{405n} + \frac{46}{25515n^2} + \cdots\]</div>
</section>
<section id="vertical-exponential-profile">
<h3>Vertical exponential profile<a class="headerlink" href="#vertical-exponential-profile" title="Link to this heading"></a></h3>
<p>Galaxies are modeled with an exponential vertical fall-off:
$<span class="math notranslate nohighlight">\(S_z(z) = \exp\left(-\frac{|z|}{h_z}\right)\)</span>$</p>
<p>Combining radial and vertical profiles gives the 3D flux density used in the
generator:</p>
<div class="math notranslate nohighlight">
\[S(x,y,z) = S_e \; \exp\left[-b_n\left(\left(\frac{r}{R_e}\right)^{1/n} - 1\right)\right]\; \exp\left(-\frac{|z|}{h_z}\right)\]</div>
<p>with <span class="math notranslate nohighlight">\(r = \sqrt{x^2 + y^2}\)</span> in the disk plane.</p>
</section>
<section id="analytical-rotation-curve">
<h3>Analytical rotation curve<a class="headerlink" href="#analytical-rotation-curve" title="Link to this heading"></a></h3>
<p>To assign tangential velocities the implementation uses a compact empirical
approximation (implemented as <code class="docutils literal notranslate"><span class="pre">milky_way_rot_curve_analytical</span></code>):</p>
<div class="math notranslate nohighlight">
\[v(R) = v_0 \times 1.022 \times \left(\frac{R}{R_0}\right)^{0.0803}\]</div>
<p>where <span class="math notranslate nohighlight">\(v_0\)</span> is a characteristic velocity scale and <span class="math notranslate nohighlight">\(R_0\)</span> is derived from the
effective radius and Sérsic index (see code comments for details). This simple
form reproduces the gently rising/flat behaviour of typical disk-galaxy rotation
curves at the scales of interest for IFU-like synthetic data.</p>
</section>
<section id="beam-convolution-and-fwhm-to-relation">
<h3>Beam convolution and FWHM to σ relation<a class="headerlink" href="#beam-convolution-and-fwhm-to-relation" title="Link to this heading"></a></h3>
<p>When simulating instrument resolution we convolve 2D channels with an elliptical
Gaussian. The conversion between FWHM and Gaussian sigma used is:</p>
<div class="math notranslate nohighlight">
\[\sigma = \frac{\mathrm{FWHM}}{2\sqrt{2\ln 2}} \approx \frac{\mathrm{FWHM}}{2.355}\]</div>
<p>This relation is used when creating a <code class="docutils literal notranslate"><span class="pre">Gaussian2DKernel</span></code> for convolution.</p>
</section>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>Assuming you have published the package to PyPI, the simplest install is:</p>
<div class="highlight-zsh notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>GalCubeCraft
</pre></div>
</div>
<p>Installing from source (developer mode):</p>
<div class="highlight-zsh notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/arnablahiry/GalCubeCraft.git
<span class="nb">cd</span><span class="w"> </span>GalCubeCraft
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
<p>Recommended dependencies are listed in <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>. A minimal set used by
the package includes:</p>
<ul class="simple">
<li><p>numpy</p></li>
<li><p>scipy</p></li>
<li><p>matplotlib</p></li>
<li><p>astropy</p></li>
<li><p>torch</p></li>
</ul>
<p>If you rely on plotting or dendrograms, also ensure <code class="docutils literal notranslate"><span class="pre">astrodendro</span></code> is available:</p>
<div class="highlight-zsh notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>astrodendro
</pre></div>
</div>
<p>Note: for environments with GPU-accelerated PyTorch, install a matching <code class="docutils literal notranslate"><span class="pre">torch</span></code>
build according to your CUDA version (see https://pytorch.org).</p>
</section>
<section id="quick-start-examples">
<h2>Quick start examples<a class="headerlink" href="#quick-start-examples" title="Link to this heading"></a></h2>
<p>Below are short, runnable examples that demonstrate common workflows. The
examples assume a Python session or script; replace package name with the one
you published to PyPI if different.</p>
<section id="generate-one-synthetic-cube-and-inspect-shapes">
<h3>1) Generate one synthetic cube and inspect shapes<a class="headerlink" href="#generate-one-synthetic-cube-and-inspect-shapes" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">GalCubeCraft</span> <span class="kn">import</span> <span class="n">GalCubeCraft</span>

<span class="c1"># Create a generator: one cube, grid 125x125, 40 spectral channels (internally oversampled)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">GalCubeCraft</span><span class="p">(</span><span class="n">n_gals</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">n_cubes</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">grid_size</span><span class="o">=</span><span class="mi">125</span><span class="p">,</span> <span class="n">n_spectral_slices</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>

<span class="c1"># Run the generation pipeline and collect results</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">generate_cubes</span><span class="p">()</span>

<span class="c1"># Each element in results is a tuple (spectral_cube, params_dict)</span>

<span class="n">cube</span><span class="p">,</span> <span class="n">params_dict</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cube shape (nz, ny, nx) =&#39;</span><span class="p">,</span> <span class="n">cube</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;geenration parameter keys =&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">params_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</pre></div>
</div>
<p>Typical output:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cube.shape</span></code> → (n_velocity, ny, nx) (e.g. (40, 125, 125))</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">params_dict</span></code> contains <code class="docutils literal notranslate"><span class="pre">average_vels</span></code>, <code class="docutils literal notranslate"><span class="pre">beam_info</span></code>, <code class="docutils literal notranslate"><span class="pre">pix_spatial_scale</span></code>, etc.</p></li>
</ul>
</section>
<section id="save-and-visualise">
<h3>2) Save and visualise<a class="headerlink" href="#save-and-visualise" title="Link to this heading"></a></h3>
<p>GalCubeCraft saves generated cubes to <code class="docutils literal notranslate"><span class="pre">data/raw_data/&lt;nz&gt;x&lt;ny&gt;x&lt;nx&gt;/cube_*.npy</span></code> by
default. The class also exposes a <code class="docutils literal notranslate"><span class="pre">visualise</span></code> helper that wraps the plotting
helpers in <code class="docutils literal notranslate"><span class="pre">visualise.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="n">visualise</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>This will show moment-0 and moment-1 maps and a velocity spectrum using
matplotlib. Set <code class="docutils literal notranslate"><span class="pre">save=True</span></code> to write PDF figures in <code class="docutils literal notranslate"><span class="pre">figures/&lt;shape&gt;/</span></code>.</p>
<p align="center">
    <img src="https://raw.githubusercontent.com/arnablahiry/GalCubeCraft/main/assets/mom0mom1.png"
         alt="Moment0-Moment1 Maps"
         width="100%" />
</p>
</section>
</section>
<section id="use-as-a-coarse-dataset-for-transfer-learning">
<h2>Use as a coarse dataset for transfer learning<a class="headerlink" href="#use-as-a-coarse-dataset-for-transfer-learning" title="Link to this heading"></a></h2>
<p>GalCubeCraft is intentionally fast, controllable, and able to produce large numbers
of cubes with varied orientations, resolutions, surface-brightness scalings and
noise behaviour. For these reasons it makes a robust coarse dataset to pretrain
machine-learning models before fine-tuning on smaller, scientifically complex
datasets.</p>
<p>Recommended workflow:</p>
<ul class="simple">
<li><p>Pretrain on large GalCubeCraft datasets to learn general spectro-spatial
features (correlated spectral lines, beam-smearing patterns, moment-map
structure). Vary resolution, S/N, Sérsic index and component multiplicity to
expose the model to a broad prior.</p></li>
<li><p>Fine-tune on a much smaller but higher-fidelity dataset that explicitly
includes the morphological complexities your downstream task requires — for
example gravitational lensing distortions, diffuse low-surface-brightness
emission, bridges and tidal tails from interacting systems, multi-component
kinematics, or instrument-specific artifacts.</p></li>
</ul>
<p>Why this helps:</p>
<ul class="simple">
<li><p>Reduces overfitting to small labelled sets by learning lower-level features on
the synthetic data and adapting higher-level representations to the target
domain during fine-tuning.</p></li>
<li><p>Speeds training and improves sample efficiency when real or high-fidelity
labels are scarce or expensive to create.</p></li>
</ul>
<p>Practical tips:</p>
<ul class="simple">
<li><p>Freeze early convolutional layers (or set a low learning rate) during initial
fine-tuning to preserve general features learned from GalCubeCraft.</p></li>
<li><p>Use domain adaptation techniques (data augmentation, style transfer, or
adversarial domain adaptation) to close the gap between synthetic and real
observations.</p></li>
<li><p>When you need morphological realism (lensing, bridges, tails, diffuse
emission), either augment GalCubeCraft procedurally (apply lensing transforms,
add low-surface-brightness components, overlay tidal bridges) or fine-tune on
simulation/observation datasets that include such complexity.</p></li>
</ul>
<p>Example tasks that benefit from this workflow: denoising, deconvolution,
source detection/segmentation, kinematic parameter regression, and anomaly
detection in spectral cubes.</p>
</section>
<section id="minimal-api-reference">
<h2>Minimal API reference<a class="headerlink" href="#minimal-api-reference" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GalCubeCraft(n_gals=None,</span> <span class="pre">n_cubes=1,</span> <span class="pre">resolution='all',</span> <span class="pre">offset_gals=5,</span> <span class="pre">beam_info=[4,4,0],</span> <span class="pre">grid_size=125,</span> <span class="pre">n_spectral_slices=40,</span> <span class="pre">fname=None,</span> <span class="pre">verbose=True,</span> <span class="pre">seed=None)</span></code></p>
<ul>
<li><p>Construct the generator. See code docstrings for parameter meanings.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">generate_cubes()</span></code> → runs the pipeline and returns a list of tuples <code class="docutils literal notranslate"><span class="pre">(cube,</span> <span class="pre">params)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">visualise(data,</span> <span class="pre">idx,</span> <span class="pre">save=False,</span> <span class="pre">fname_save=None)</span></code> → wrapper for plotting utilities</p></li>
</ul>
<p>Full API documentation (detailed user guide, class/function reference and extended
examples) is currently in preparation on ReadTheDocs and will be published at
https://galcubecraft.readthedocs.io when ready — coming soon.</p>
<p>Files of interest in the repository:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src/GalCubeCraft/core.py</span></code> — main pipeline and <code class="docutils literal notranslate"><span class="pre">GalCubeCraft</span></code> class</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src/GalCubeCraft/utils.py</span></code> — beam, convolution and mask helpers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src/GalCubeCraft/visualise.py</span></code> — plotting helpers (moment maps, spectra)</p></li>
</ul>
</section>
<section id="reproducibility-limitations-and-edge-cases">
<h2>Reproducibility, limitations and edge cases<a class="headerlink" href="#reproducibility-limitations-and-edge-cases" title="Link to this heading"></a></h2>
<p>Edge cases and behaviour to be aware of:</p>
<ul class="simple">
<li><p>Small effective radii (much smaller than the beam) trigger flux-scaling to
avoid vanishing integrated flux; check <code class="docutils literal notranslate"><span class="pre">all_Se</span></code> and <code class="docutils literal notranslate"><span class="pre">all_Re</span></code> if results look
unusually bright or faint.</p></li>
<li><p>Very small grids or extremely fine spectral oversampling may increase memory
use; the code uses modest oversampling (5x) and then bins channels.</p></li>
<li><p>The generator uses a compact analytic rotation curve (not a full mass-model).
For physically realistic kinematics beyond toy data, replace the rotation
module with your preferred prescription.</p></li>
</ul>
<p>Suggested tests:</p>
<ul class="simple">
<li><p>Verify <code class="docutils literal notranslate"><span class="pre">generate_cubes()</span></code> returns arrays with non-negative flux (the code clips
negative numerical artifacts to zero before convolution).</p></li>
<li><p>Confirm beam convolution preserves integrated flux (up to numerical noise).</p></li>
</ul>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Import error after pip install: check that <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> is not shadowing the
installed package and that you’re using the same Python interpreter where
<code class="docutils literal notranslate"><span class="pre">pip</span></code> installed the package (use <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">...</span></code> to be explicit).</p></li>
<li><p>If plotting fails, ensure GUI backend is available or use a non-interactive
backend (e.g., <code class="docutils literal notranslate"><span class="pre">matplotlib.use('Agg')</span></code>) when running headless.</p></li>
</ul>
</section>
<section id="credits-citation">
<h2>Credits &amp; citation<a class="headerlink" href="#credits-citation" title="Link to this heading"></a></h2>
<p>This package was developed as a compact educational and research tool for IFU
data simulation and denoising algorithm development. If you use GalCubeCraft in
published work, please cite the following paper:</p>
<p><strong>Lahiry, A., Díaz-Santos, T., Starck, J.-L., Roy, N. C., Anglés-Alcázar, D., Tsagkatakis, G., &amp; Tsakalides, P.</strong><br />
<em>Deep and Sparse Denoising Benchmarks for Spectral Data Cubes of High-z Galaxies: From Simulations to ALMA Observations.</em><br />
Submitted to <strong>Astronomy &amp; Astrophysics (A&amp;A)</strong>, 2025.</p>
<p>License: MIT — see the <code class="docutils literal notranslate"><span class="pre">LICENSE</span></code> file in this repository for the full text.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="core_functionality.html" class="btn btn-neutral float-right" title="Core Functionality" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Arnab Lahiry.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>